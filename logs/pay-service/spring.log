21:48:17:594  INFO 7664 --- [main] com.hmall.pay.PayApplication             : Starting PayApplication using Java 11.0.15.1 on DESKTOP-RI498KT with PID 7664 (D:\hmsc\hmall\pay-service\target\classes started by Twelve-HaHa in D:\hmsc\hmall)
21:48:17:598 DEBUG 7664 --- [main] com.hmall.pay.PayApplication             : Running with Spring Boot v2.7.12, Spring v5.3.27
21:48:17:599  INFO 7664 --- [main] com.hmall.pay.PayApplication             : The following 1 profile is active: "local"
21:48:18:406  INFO 7664 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=7e2265be-1e3d-3c7c-b2a1-01cfdaf94ab9
21:48:18:676  INFO 7664 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8086 (http)
21:48:18:684  INFO 7664 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
21:48:18:684  INFO 7664 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
21:48:18:789  INFO 7664 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
21:48:18:789  INFO 7664 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1159 ms
21:48:18:958  INFO 7664 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'user-service' URL not provided. Will try picking an instance via load-balancing.
21:48:19:010  INFO 7664 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'trade-service' URL not provided. Will try picking an instance via load-balancing.
21:48:21:558  INFO 7664 --- [main] pertySourcedRequestMappingHandlerMapping : Mapped URL path [/v2/api-docs] onto method [springfox.documentation.swagger2.web.Swagger2ControllerWebMvc#getDocumentation(String, HttpServletRequest)]
21:48:22:301  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [RpcClientFactory] create a new rpc client of f8062fa2-3658-4f7f-8bc0-2360b588f26a
21:48:22:333  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 18 ms to scan 1 urls, producing 3 keys and 6 values 
21:48:22:352  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 8 ms to scan 1 urls, producing 4 keys and 9 values 
21:48:22:361  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 6 ms to scan 1 urls, producing 3 keys and 10 values 
21:48:22:363  WARN 7664 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
21:48:22:370  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 7 ms to scan 1 urls, producing 1 keys and 5 values 
21:48:22:378  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 6 ms to scan 1 urls, producing 1 keys and 7 values 
21:48:22:397  INFO 7664 --- [main] org.reflections.Reflections              : Reflections took 17 ms to scan 1 urls, producing 2 keys and 8 values 
21:48:22:399  WARN 7664 --- [main] org.reflections.Reflections              : given scan urls are empty. set urls in the configuration
21:48:22:400  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] RpcClient init label, labels = {module=naming, source=sdk}
21:48:22:401  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
21:48:22:401  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
21:48:22:402  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
21:48:22:406  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Try to connect to server on start up, server: {serverIp = '192.168.139.130', server main port = 8848}
21:48:24:211  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Success to connect to server [192.168.139.130:8848] on start up, connectionId = 1718027305153_172.17.0.1_46484
21:48:24:212  INFO 7664 --- [com.alibaba.nacos.client.remote.worker] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Notify connected event to listeners.
21:48:24:213  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
21:48:24:217  INFO 7664 --- [main] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1070/0x0000000800743c40
21:48:24:275  INFO 7664 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8086 (http) with context path ''
21:48:24:282  INFO 7664 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP pay-service 10.206.222.232:8086 register finished
21:48:24:798  INFO 7664 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Receive server push request, request = NotifySubscriberRequest, requestId = 36
21:48:24:800  INFO 7664 --- [nacos-grpc-client-executor-9] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Ack server push request, request = NotifySubscriberRequest, requestId = 36
21:48:24:833  INFO 7664 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Documentation plugins bootstrapped
21:48:24:835  INFO 7664 --- [main] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
21:48:24:851  INFO 7664 --- [main] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
21:48:24:928  INFO 7664 --- [main] com.hmall.pay.PayApplication             : Started PayApplication in 8.325 seconds (JVM running for 9.208)
21:50:33:932  INFO 7664 --- [http-nio-8086-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
21:50:33:932  INFO 7664 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
21:50:33:932  INFO 7664 --- [http-nio-8086-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
21:50:34:024  INFO 7664 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
21:50:34:190  INFO 7664 --- [http-nio-8086-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
21:50:34:195 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE (biz_order_no = ?)
21:50:34:211 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : ==> Parameters: 1800163644442013698(Long)
21:50:34:228 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.selectOne  : <==      Total: 0
21:50:34:263 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==>  Preparing: INSERT INTO pay_order ( id, biz_order_no, pay_order_no, biz_user_id, pay_channel_code, amount, pay_type, status, pay_over_time ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
21:50:34:276 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : ==> Parameters: 1800163650091683841(Long), 1800163644442013698(Long), 1800163650079100930(Long), 2(Long), balance(String), 998800(Integer), 5(Integer), 1(Integer), 2024-06-10T23:50:34.259553900(LocalDateTime)
21:50:34:283 DEBUG 7664 --- [http-nio-8086-exec-1] c.h.pay.mapper.PayOrderMapper.insert     : <==    Updates: 1
21:50:37:538 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==>  Preparing: SELECT id,biz_order_no,pay_order_no,biz_user_id,pay_channel_code,amount,pay_type,status,expand_json,result_code,result_msg,pay_success_time,pay_over_time,qr_code_url,create_time,update_time,creater,updater,is_delete FROM pay_order WHERE id=?
21:50:37:539 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : ==> Parameters: 1800163650091683841(Long)
21:50:37:557 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.p.mapper.PayOrderMapper.selectById   : <==      Total: 1
21:50:37:560 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> PUT http://user-service/users/money/deduct?pw=123&amount=998800 HTTP/1.1
21:50:37:560 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] user-info: 2
21:50:37:560 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] ---> END HTTP (0-byte body)
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- HTTP/1.1 200 (176ms)
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] connection: keep-alive
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] content-length: 0
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] date: Mon, 10 Jun 2024 13:50:37 GMT
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] keep-alive: timeout=60
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] 
21:50:37:736 DEBUG 7664 --- [http-nio-8086-exec-2] com.hmall.api.client.UserClient          : [UserClient#deductMoney] <--- END HTTP (0-byte body)
21:50:37:740 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==>  Preparing: UPDATE pay_order SET status=?,pay_success_time=? WHERE (id = ? AND status IN (?,?))
21:50:37:741 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : ==> Parameters: 3(Integer), 2024-06-10T21:50:37.737691300(LocalDateTime), 1800163650091683841(Long), 0(Integer), 1(Integer)
21:50:37:744 DEBUG 7664 --- [http-nio-8086-exec-2] c.h.pay.mapper.PayOrderMapper.update     : <==    Updates: 1
21:50:37:747  INFO 7664 --- [http-nio-8086-exec-2] o.s.a.r.c.CachingConnectionFactory       : Attempting to connect to: [192.168.139.130:5672]
21:50:37:772  INFO 7664 --- [http-nio-8086-exec-2] o.s.a.r.c.CachingConnectionFactory       : Created new connection: rabbitConnectionFactory#5fd18419:0/SimpleConnection@933f93 [delegate=amqp://hmall@192.168.139.130:5672//hmall, localPort= 50598]
21:50:38:149  INFO 7664 --- [nacos-grpc-client-executor-40] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Receive server push request, request = NotifySubscriberRequest, requestId = 48
21:50:38:149  INFO 7664 --- [nacos-grpc-client-executor-40] com.alibaba.nacos.common.remote.client   : [f8062fa2-3658-4f7f-8bc0-2360b588f26a] Ack server push request, request = NotifySubscriberRequest, requestId = 48
22:03:55:620  WARN 7664 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
22:03:55:620  WARN 7664 --- [Thread-4] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
22:03:55:620  WARN 7664 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
22:03:55:621  WARN 7664 --- [Thread-7] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
22:03:56:167  INFO 7664 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
22:03:56:171  INFO 7664 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
22:03:56:479  INFO 7664 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown rpc client, set status to shutdown
22:03:56:479  INFO 7664 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1ecfe703[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
22:03:56:479  INFO 7664 --- [SpringApplicationShutdownHook] com.alibaba.nacos.common.remote.client   : Close current connection 1718027305153_172.17.0.1_46484
22:03:56:488  INFO 7664 --- [SpringApplicationShutdownHook] c.a.n.c.remote.client.grpc.GrpcClient    : Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@1cbd4839[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 204]
22:03:56:496  INFO 7664 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
22:03:56:522  INFO 7664 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
